

<!-- Path to wiki directories, without backslash -->

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Diagnosing problems using Logs &mdash; Copter  documentation</title>
  

  <!-- favicon -->
  
  
    <link rel="shortcut icon" href="../_static/favicon_copter.ico"/>
  
  <!-- favicon end -->
  
  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/common_theme_override.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Copter  documentation" href="../index.html"/>
        <link rel="up" title="Logs" href="common-logs.html"/>
        <link rel="next" title="Downloading and Analyzing Data Logs in Mission Planner" href="common-downloading-and-analyzing-data-logs-in-mission-planner.html"/>
        <link rel="prev" title="Logs" href="common-logs.html"/>  
  <script type="text/javascript">
  window.liveSettings = {
    api_key: "53747d3f35bf4cec9372629094cd9fe2",
    picker: "bottom-right",
    detectlang: true,
    autocollect: true,
    dynamic: false
  };
  </script>


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>



<body class="wy-body-for-nav" role="document">

        
    <div id='cssmenu'>
        <ul>
           <li><a href='/ardupilot/index.html'>Home</a>
              <ul>
                 <li><a href='/copter/index.html'>Copter</a></li>
                 <li><a href='/plane/index.html'>Plane</a></li>
                 <li><a href='/rover/index.html'>Rover</a></li>
                 <li><a href='http://ardusub.com/'>Sub</a></li>
                 <li><a href='/antennatracker/index.html'>AntennaTracker</a></li>
                 <li><a href='/planner/index.html'>Mission Planner</a></li>
                 <li><a href='/planner2/index.html'>APM Planner 2</a></li>
                 <li><a href='/mavproxy/index.html'>MAVProxy</a></li>
                 <li><a href='/dev/docs/companion-computers.html'>Companion Computers</a></li>
                 <li><a href='/dev/index.html'>Developer</a></li>
              </ul>
           </li>
           
          
           
           <li><a href='https://firmware.ardupilot.org/'>Downloads</a>
              <ul>
                <li><a href='https://firmware.ardupilot.org/Tools/MissionPlanner/'>Mission Planner</a></li>
                <li><a href='https://firmware.ardupilot.org/Tools/APMPlanner/'>APM Planner 2</a></li>
                   <li><a title="Advanced User Tools" href="common-downloads_advanced_user_tools.html">Advanced User Tools</a></li>
                   <li><a title="Developer Tools" href="common-downloads_developer_tools.html">Developer Tools</a></li>
                   <li><a title="Firmware" href="common-downloads_firmware.html">Firmware</a></li>
                </ul>
           </li>
           
           <li><a href='https://discuss.ardupilot.org' />Community</a>
              <ul>
                 <li><a href='https://discuss.ardupilot.org/'>Support Forums</a></li>
                 <li><a href='https://www.facebook.com/groups/ArduPilot.org'>Facebook</a></li>
                 <li><a href='https://ardupilot.org/discord'>Developer Chat (Discord)</a></li>
                 <li><a href='https://ardupilot.org/discord'>Developer Voice (Discord)</a></li>
				 <li><a href='https://ardupilot.org/dev/docs/common-contact-us.html'>Contact us</a></li>
				 <li><a href='https://ardupilot.org/dev/index.html#getting-involved'>Getting involved</a></li>
                   <li><a title="Commercial Support" href="common-commercial-support.html">Commercial Support</a></li>
                   <li><a title="Dev Team" href="common-team.html">Development Team</a></li>
                   <li><a title="Training Centers" href="common-training-centers.html">UAS Training Centers</a></li>
              </ul>
           </li>
             <li><a title="Stores" href="common-stores.html">Stores</a></li>


             <li><a title="SWAG Shop" href="https://shop.ardupilot.org">SWAG</a></li>

           
           
                        <li><a title="About" href="../index.html">About</a>
               <ul>
                   <li><a title="Project News" href="project-news.html">News</a></li>
                   <li><a title="History of ArduPilot" href="common-history-of-ardupilot.html">History</a></li>
                   <li><a href='https://ardupilot.org/dev/docs/license-gplv3.html'>License</a></li>
                   <li><a href='https://ardupilot.org/dev/docs/trademark.html'>Trademark</a></li>
                   <li><a title="Acknowledgments" href="common-acknowledgments.html">Acknowledgments</a></li>
                   <li><a title="Wiki Editing Guide" href="common-wiki_editing_guide.html">Wiki Editing Guide</a></li>
               </ul>
             </li>
        </ul>
        
<style>
#jdlogo {
  top: 10px;
  right: 20px;
  position: absolute;
  color: #dddddd;
}
#jdlogo a:visited,
#jdlogo a:link {
  color: #9B59B6;
}
#jdlogo a:hover,
#jdlogo a:active {
  color: #CACACA;
}
</style>

</div>

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> Copter
        

        
          
          <img src="../_static/ardupilot_logo.png" class="logo" />
        
        </a>

        
          
          
        

        
          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        
        
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introducing Copter</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-autopilots.html">AutoPilot Hardware Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial-setup.html">First Time Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="flying-arducopter.html">First Flight</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-when-problems-arise.html">If A Problem Arises</a></li>
<li class="toctree-l1"><a class="reference internal" href="copter-flight-features.html">Flight Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-advanced-configuration.html">Advanced Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-mission-planning.html">Mission Planning</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="common-logs.html">Logs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="common-logs.html#topics-related-to-logging-and-analysis">Topics related to logging and analysis</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Diagnosing problems using Logs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#log-types-dataflash-vs-tlogs">Log Types (Dataflash vs tlogs)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mechanical-failures">Mechanical Failures</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vibrations">Vibrations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compass-interference">Compass interference</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gps-glitches">GPS glitches</a></li>
<li class="toctree-l4"><a class="reference internal" href="#power-problems-brownouts-etc">Power Problems (BrownOuts, etc)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unexpected-errors-including-failsafes">Unexpected ERRORS including Failsafes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="common-downloading-and-analyzing-data-logs-in-mission-planner.html">Dataflash Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="logmessages.html">Copter Log Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-measuring-vibration.html">Measuring Vibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-imu-batchsampling.html">Measuring Vibration with &quot;Batch Sampling&quot;</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-mission-planner-telemetry-logs.html">Telemetry Logs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="common-logs.html#tools-for-log-analysis">Tools for log analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="common-optional-hardware.html">Peripheral Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="traditional-helicopters.html">Traditional Helicopters</a></li>
<li class="toctree-l1"><a class="reference internal" href="tricopter.html">Tricopter</a></li>
<li class="toctree-l1"><a class="reference internal" href="singlecopter-and-coaxcopter.html">SingleCopter and CoaxCopter</a></li>
<li class="toctree-l1"><a class="reference internal" href="heliquads.html">HeliQuads</a></li>
<li class="toctree-l1"><a class="reference internal" href="skyrocket.html">SkyRocket</a></li>
<li class="toctree-l1"><a class="reference internal" href="solo_arducopter_upgrade.html">Solo</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference-frames.html">Reference Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-use-cases-and-applications.html">Use-Cases and Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-antenna-tracking.html">Antenna Tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-simulation.html">Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-master-features.html">Upcoming Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-user-alerts.html">User Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-appendix.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-table-of-contents.html">Full Table of Contents</a></li>
</ul>

          
        
        
        <!-- add paypal and dronecode logos -->
                <div style="margin: auto; padding-left:20px; padding-right:20px; width=100%">

        <hr />
        <form style="margin:auto;" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
        <input type="hidden" name="cmd" value="_s-xclick" />
        <input type="hidden" name="hosted_button_id" value="BBF28AFAD58B2" />
        <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate" />
        </form>
        <br>
        <a href="common-donation.html">Individual</a>
        <a href="common-partners.html">Partners</a>
        <a href="https://shop.ardupilot.org">SWAG Shop</a>

        <hr />
        </div>
        <!-- endadd paypal and dronecode logos -->
              
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Copter</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



 
 
 
 
 
  
   
 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="common-logs.html">Logs</a> &raquo;</li>
      
    <li>Diagnosing problems using Logs</li>
      <li class="wy-breadcrumbs-aside">
                
          
            <a href="https://github.com/ArduPilot/ardupilot_wiki/blob/master/common/source/docs/common-diagnosing-problems-using-logs.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="diagnosing-problems-using-logs">
<span id="common-diagnosing-problems-using-logs"></span><h1>Diagnosing problems using Logs<a class="headerlink" href="#diagnosing-problems-using-logs" title="Permalink to this headline">¶</a></h1>
<p>This page show how to diagnose the six most common problems affecting Copter in particular but to some extent Plane and Rover as well.</p>
<div class="section" id="log-types-dataflash-vs-tlogs">
<h2>Log Types (Dataflash vs tlogs)<a class="headerlink" href="#log-types-dataflash-vs-tlogs" title="Permalink to this headline">¶</a></h2>
<p>There are two ways to record your flight data. With some exceptions, the
two methods record very similar data but in different ways:</p>
<ul class="simple">
<li><a class="reference internal" href="common-downloading-and-analyzing-data-logs-in-mission-planner.html#common-downloading-and-analyzing-data-logs-in-mission-planner"><span class="std std-ref">Dataflash logs</span></a> are recorded on the autopilot (often to the SD card) so they must be downloaded from the autopilot after a flight</li>
<li><a class="reference external" href="https://ardupilot.org/planner/docs/common-mission-planner-telemetry-logs.html#common-mission-planner-telemetry-logs" title="(in Mission Planner)"><span class="xref std std-ref">Telemetry logs</span></a> (also known as “tlogs”) are recorded by the ground station (i.e. Mission Planner) on the local PC when the autopilot is connected via a <a class="reference internal" href="common-telemetry-landingpage.html#common-telemetry-landingpage"><span class="std std-ref">telemetry link</span></a></li>
</ul>
<p>If you are not yet familiar with the basics of these log files, first review the introductory pages to understand where these logs are stored and how you can download and view the information held within them.</p>
</div>
<div class="section" id="mechanical-failures">
<span id="common-diagnosing-problems-using-logs-mechanical-failures"></span><h2>Mechanical Failures<a class="headerlink" href="#mechanical-failures" title="Permalink to this headline">¶</a></h2>
<p>Common mechanical failures include a motor or ESC failure (<a class="reference external" href="https://www.youtube.com/watch?v=hBUBbeyLe0Q">including ESC sync failures</a>), the propeller breaking or coming off, etc.  These appear in the log as a sudden divergence in the desired roll and pitch vs the vehicle’s actual roll and pitch.  This divergence is visible by graphing the ATT message’s DesRoll vs Roll, DesPitch vs Pitch and to a lesser extent DesYaw vs Yaw.</p>
<a class="reference external image-reference" href="../_images/DiagnosingWithLogs_RollInVsRoll.png"><img alt="../_images/DiagnosingWithLogs_RollInVsRoll.png" src="../_images/DiagnosingWithLogs_RollInVsRoll.png" /></a>
<p>In the example above the vehicle’s actual roll (“Roll”) closely follows the desired roll (“DesRoll”) for the first part of the log but then suddenly diverges.  The autopilot wanted the roll to remain level (“Roll” = 0) but it was unable to likely meaning there was a mechanical failure.  This is very different from a software failure in which the autopilot freaked out and for some strange reason suddenly wanted the copter up-side-down because in such cases the DesRoll would be also be crazy and actual Roll would follow.</p>
<p>Tlogs contain the same data.  Compare NAV_CONTROLLER_OUTPUT’s nav_roll (desired roll) and nav_pitch (desired pitch) to ATTITUDE.roll (actual roll) and pitch (actual pitch).</p>
</div>
<div class="section" id="vibrations">
<span id="common-diagnosing-problems-using-logs-vibrations"></span><h2>Vibrations<a class="headerlink" href="#vibrations" title="Permalink to this headline">¶</a></h2>
<p>High vibrations can cause the Copter’s accelerometer based altitude and horizontal position estimates to drift far off from reality which leads to problems with altitude hold (the vehicle may rocket into the sky) or position control in modes like Loiter, PosHold, Auto, etc.</p>
<p>As covered on the <a class="reference internal" href="common-measuring-vibration.html#common-measuring-vibration"><span class="std std-ref">Measuring Vibration</span></a> page, vibrations are best viewed by graphing the <strong>VIBE</strong> message’s <strong>VibeX</strong>, <strong>VibeY</strong> and <strong>VibeZ</strong> values.  Vibration levels below 30m/s/s are normally acceptable. Levels above 30m/s/s may have problems and levels above 60m/s/s nearly always have problems with position or altitude hold.</p>
<p>The below graph shows acceptable vibration levels which are consistently below 30m/s/s</p>
<a class="reference external image-reference" href="../_images/mp_vibe_dataflash_msg.png"><img alt="../_images/mp_vibe_dataflash_msg.png" src="../_images/mp_vibe_dataflash_msg.png" /></a>
<p>The graph below is from a vehicle that had position estimation problems due to high vibrations</p>
<a class="reference external image-reference" href="../_images/mp_measuring_vibration_bad_vibes.png"><img alt="../_images/mp_measuring_vibration_bad_vibes.png" src="../_images/mp_measuring_vibration_bad_vibes.png" /></a>
<p>Tlog’s VIBRATION <strong>vibration_x</strong>, <strong>vibration_y</strong> and <strong>vibration_z</strong> can also be used and show the same information as is stored to the dataflash log</p>
<a class="reference external image-reference" href="../_images/DiagnosingWithLogs_VibesTlog.png"><img alt="../_images/DiagnosingWithLogs_VibesTlog.png" src="../_images/DiagnosingWithLogs_VibesTlog.png" /></a>
</div>
<div class="section" id="compass-interference">
<span id="common-diagnosing-problems-using-logs-compass-interference"></span><h2>Compass interference<a class="headerlink" href="#compass-interference" title="Permalink to this headline">¶</a></h2>
<p>Interference from the power distribution board, motors, battery, ESCs and other electrical devices near the autopilot can throw off the compass heading which can lead to circling (aka “toilet bowling”) or even the copter flying off in completely the wrong direction.  Graphing the tlog’s mag_field (found under “CUSTOM”) and throttle (found under VFR_HUD) is the easiest way to quickly see the amount of interference.</p>
<p>The graph below shows an acceptable amount of magnetic interference with mag_field fluctuations of only 10% to 20% when the throttle is raised.  Below 30% interference is acceptable.  Between 30% ~ 60% is in the grey zone where it might be OK (some users are OK, some are not) and really bad magnetic interference will show up as jumps of over 60% when the throttle is raised.</p>
<a class="reference external image-reference" href="../_images/DiagnosingWithLogs_MagFieldVsThr.png"><img alt="../_images/DiagnosingWithLogs_MagFieldVsThr.png" src="../_images/DiagnosingWithLogs_MagFieldVsThr.png" /></a>
<p>Extra Notes:</p>
<ul class="simple">
<li>The length of the mag_field can be anywhere from 120 ~ 550 depending upon where in the world the vehicle is but it is normally around 330</li>
<li>The magnetic interference as a percentage of the total mag field is also displayed at the end of the compassmot set-up procedure.  Search for “CompassMot” on the <a class="reference internal" href="common-compass-setup-advanced.html#common-compass-setup-advanced"><span class="std std-ref">Advanced Compass Setup page</span></a> page to learn more about compassmot</li>
<li>Dataflash log’s COMPASS message hold the compass’s raw x, y and z axis values (called MagX, MagY, MagZ) which are equivalent to the tlog’s RAW_IMU xmag, ymag and zmag fields.  It is possible to calculate the mag-field length by first loading the dataflash log file into excel, filtering by the COMPASS message and then calculating the mag-field using the formula mag_field = sqrt(MagX^2, MagY^2, MagZ^2).  Note that the COMPASS message is not enabled by default in the dataflash logs because it runs at 50hz and does affect CPU performance a bit.</li>
<li>The image above it shows a short spike at the beginning of the graph but this can be ignored because it is before the throttle is raised so it is probably just as the user plugged in some other electrical device</li>
</ul>
</div>
<div class="section" id="gps-glitches">
<span id="common-diagnosing-problems-using-logs-gps-glitches"></span><h2>GPS glitches<a class="headerlink" href="#gps-glitches" title="Permalink to this headline">¶</a></h2>
<p>When in autonomous modes (Loiter, RTL, Auto, etc) position errors from the GPS can cause the vehicle to think that it is suddenly in the wrong place and lead to aggressive flying to correct the perceived error.  These “glitches” show up in both the tlogs and dataflash logs as a decrease in the number of satellites visible and an increase in the <a class="reference external" href="https://en.wikipedia.org/wiki/Dilution_of_precision_%28GPS%29">hdop</a>.</p>
<p>Graph the Dataflash log’s GPS message’s “HDop” and “NSats” values.  Hdop values below 1.5 are very good, values over 2.0 could indicate the GPS positions are not good.  The number of satellites falling below 12 is also bad.  A significant change in these two values often accompanies a GPS position change.</p>
<a class="reference external image-reference" href="../_images/DisagnosingWithLogs_GPShdopAndNumSats_DF.png"><img alt="../_images/DisagnosingWithLogs_GPShdopAndNumSats_DF.png" src="../_images/DisagnosingWithLogs_GPShdopAndNumSats_DF.png" /></a>
<p>If using tlogs graph the GPS_RAW_IT group’s “eph” and “satellites_visible” values.  Hdop values below 150 are good, values over 200 could indicate a bad position.</p>
<a class="reference external image-reference" href="../_images/DisagnosingWithLogs_GPShdopAndNumSats.png"><img alt="../_images/DisagnosingWithLogs_GPShdopAndNumSats.png" src="../_images/DisagnosingWithLogs_GPShdopAndNumSats.png" /></a>
<p>See the <a class="reference external" href="https://ardupilot.org/copter/docs/ekf-inav-failsafe.html#ekf-inav-failsafe" title="(in Copter)"><span class="xref std std-ref">EKF failsafe</span></a> wiki page for more details on how the vehicle may switch to non-autonomous modes in the case of very bad GPS glitches</p>
</div>
<div class="section" id="power-problems-brownouts-etc">
<h2>Power Problems (BrownOuts, etc)<a class="headerlink" href="#power-problems-brownouts-etc" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="common-powermodule-landingpage.html#common-powermodule-landingpage"><span class="std std-ref">Power Modules</span></a> provide a reliable power supply to the autopilot but brown-outs do still occasionally occur.  They can normally be recognised by the logs suddenly ending while the vehicle is still in the air (i.e. barometer or EKF altitude is still reporting the vehicle’s altitude is well above zero).</p>
<p>Try graphing the:</p>
<ul class="simple">
<li>Dataflash log’s CTUN Alt (altitude above home) or BAlt (Barometer altitude)</li>
<li>Dataflash log’s GPS Alt (altitude above sea level)</li>
<li>Tlog’s VFR_HUD alt (the combined accelerometer + barometer altitude estimate)</li>
<li>Tlog’s GLOBAL_POSITION relative_alt (altitude above home)</li>
</ul>
<a class="reference external image-reference" href="../_images/DiagnosingWithLogs_BrownOut.png"><img alt="../_images/DiagnosingWithLogs_BrownOut.png" src="../_images/DiagnosingWithLogs_BrownOut.png" /></a>
<p>Changes in the board voltage can also be a sign of a power problem.  Variations of 0.10 to 0.15 volts are normal.  Beyond that could be a sign that other devices sharing the power source with the autopilot are causing ripples in the power supply that could lead to a brown-out.  The board voltage can be graphed using:</p>
<ul class="simple">
<li>Dataflash POWR message’s VCC</li>
<li>Tlog HWSTATUS’s Vcc</li>
</ul>
<p>In the image directly below shows the board voltage sinking by 0.15V when the throttle is raised.  This is generally not a good thing but because it’s only 0.15V it’s probably OK. The 2nd graph below (a dataflash graph from a different user’s log) shows a very stable voltage with ripples less than 0.1V.</p>
<a class="reference external image-reference" href="../_images/DiagnosingWithLogs_BoardVccVsThr.png"><img alt="../_images/DiagnosingWithLogs_BoardVccVsThr.png" src="../_images/DiagnosingWithLogs_BoardVccVsThr.png" /></a>
<a class="reference external image-reference" href="../_images/DiagnosingWithLogs_DataFlashBoardVcc.png"><img alt="../_images/DiagnosingWithLogs_DataFlashBoardVcc.png" src="../_images/DiagnosingWithLogs_DataFlashBoardVcc.png" /></a>
</div>
<div class="section" id="unexpected-errors-including-failsafes">
<h2>Unexpected ERRORS including Failsafes<a class="headerlink" href="#unexpected-errors-including-failsafes" title="Permalink to this headline">¶</a></h2>
<p>When unexpected behaviour from the autopilot occurs (especially when the user complains that the copter no longer responded to their input) it is often caused by one of the <a class="reference external" href="https://ardupilot.org/copter/docs/failsafe-landing-page.html#failsafe-landing-page" title="(in Copter)"><span class="xref std std-ref">failsafes</span></a> being triggered.</p>
<p>The easiest way to find these is to look in the dataflash logs and filter the first column by “ERR”.  If using the Mission Planner, the errors will also appear in red markers at the top of the graphing area.</p>
<a class="reference external image-reference" href="../_images/DiagnosingWithLogs_FilterForErrors.png"><img alt="../_images/DiagnosingWithLogs_FilterForErrors.png" src="../_images/DiagnosingWithLogs_FilterForErrors.png" /></a>
<p>The Subsys (aka Sub-system) gives the area that generated the error and the ECode (aka Error Code) tells you what the error was specifically.  The list of subsystems and error codes can be found in the AP_Logger library <a class="reference external" href="https://github.com/ArduPilot/ardupilot/blob/master/libraries/AP_Logger/AP_Logger.h#L33">AP_Logger.h file</a>.</p>
<table border="1" class="docutils">
<tbody>
<tr>
<th>Subsys</th>
<th>ECode and Description</th>
</tr>
<tr>
<td>2 = Radio</td>
<td><ul class="simple">
<li>0 = Errors Resolved</li>
<li>2 = Late Frame : no updates received from receiver for two seconds</li>
</ul>
</td>
</tr>
<tr>
<td>3 = Compass</td>
<td><ul class="simple">
<li>0 = Errors Resolved</li>
<li>1 = Failed to initialise (probably a hardware issue)</li>
<li>4 = Unhealthy : failed to read from the sensor</li>
</ul>
</td>
</tr>

<tr>
<td>5 = Radio Failsafe</td>
<td><ul class="simple">
<li>0 = Failsafe Resolved</li>
<li>1 = Failsafe Triggered</li>
</ul>
</td>
</tr>

<tr>
<td>6 = Battery Failsafe</td>
<td><ul class="simple">
<li>0 = Failsafe Resolved</li>
<li>1 = Failsafe Triggered</li>
</ul>
</td>
</tr>

<tr>
<td>8 = GCS Failsafe</td>
<td><ul class="simple">
<li>0 = Failsafe Resolved</li>
<li>1 = Failsafe Triggered</li>
</ul>
</td>
</tr>

<tr>
<td>9 = Fence Failsafe</td>
<td><ul class="simple">
<li>0 = Failsafe Resolved</li>
<li>1 = Altitude fence breach, Failsafe Triggered</li>
<li>2 = Circular fence breach, Failsafe Triggered</li>
<li>3 = Both Alt and Circular fence breached, Failsafe Triggered</li>
<li>4 = Polygon fence breached, Failsafe Triggered</li>
</ul>
</td>
</tr>

<tr>
<td>10 = Flight mode Change failure</td>
<td><p>Vehicle was unable to enter the desired flight mode normally because of a bad position estimate</p>
<p>See <a class="reference external" href="https://github.com/ArduPilot/ardupilot/blob/master/ArduCopter/mode.h#L14">flight mode numbers here</a> for Copter, <a class="reference external" href="https://github.com/ArduPilot/ardupilot/blob/master/ArduPlane/mode.h#L15">Plane modes here</a>, and <a class="reference external" href="https://github.com/ArduPilot/ardupilot/blob/master/Rover/mode.h#L19">Rover modes here</a></p>
</td>
</tr>

<tr>
<td>11 = GPS</td>
<td><ul class="simple">
<li>0 = Glitch cleared</li>
<li>2 = GPS Glitch occurred</li>
</ul>
</td>
</tr>

<tr>
<td>12 = Crash Check</td>
<td><ul class="simple">
<li>1 = Crash into ground detected.  Normally vehicle is disarmed soon after</li>
<li>2 = Loss of control detected.  Normally parachute is released soon after</li>
</ul>
</td>
</tr>

<tr>
<td>13 = Flip mode</td>
<td>2 = Flip abandoned (not armed, pilot input or timeout)</td>
</tr>
<tr>
<td>15 = Parachute</td>
<td><ul class="simple">
<li>2 = Not Deployed, vehicle too low</li>
<li>3 = Not Deployed, vehicle landed</li>
</ul>
</td>
</tr>

<tr>
<td>16 = EKF Check</td>
<td><ul class="simple">
<li>0 = Variance cleared (position estimate OK)</li>
<li>2 = Bad Variance (position estimate bad)</li>
</ul>
</td>
</tr>

<tr>
<td>17 = EKF Failsafe</td>
<td><ul class="simple">
<li>0 = Failsafe Resolved</li>
<li>1 = Failsafe Triggered</li>
</ul>
</td>
</tr>

<tr>
<td>18 = Barometer</td>
<td><ul class="simple">
<li>0 = Errors Resolved</li>
<li>4 = Unhealthy : failed to read from the sensor</li>
</ul>
</td>
</tr>

<tr>
<td>19 = CPU Load Watchdog</td>
<td><ul class="simple">
<li>0 = Failsafe Resolved</li>
<li>1 = Failsafe Triggered (normally vehicle disarms)</li>
</ul>
</td>
</tr>

<tr>
<td>20 = ADSB Failsafe</td>
<td><ul class="simple">
<li>0 = Failsafe Resolved</li>
<li>1 = No action just report to Pilot</li>
<li>2 = Vehicle avoids by climbing or descending</li>
<li>3 = Vehicle avoids by moving horizontally</li>
<li>4 = Vehicle avoids by moving perpendicular to other vehicle</li>
<li>5 = RTL invoked</li>
</ul>
</td>
</tr>

<tr>
<td>21 = Terrain Data</td>
<td>2 = missing terrain data</td>
</tr>

<tr>
<td>22 = Navigation</td>
<td><ul class="simple">
<li>2 = Failed to set destination</li>
<li>3 = RTL restarted</li>
<li>4 = Circle initialisation failed</li>
<li>5 = Destination outside fence</li>
</ul>
</td>
</tr>

<tr>
<td>23 = Terrain Failsafe</td>
<td><ul class="simple">
<li>0 = Failsafe Resolved</li>
<li>1 = Failsafe Triggered (normally vehicle RTLs)</li>
</ul>
</td>
</tr>

<tr>
<td>24 = EKF Primary changed</td>
<td><ul class="simple">
<li>0 = 1st EKF has become primary</li>
<li>1 = 2nd EKF has become primary</li>
</ul>
</td>
</tr>

<tr>
<td>25 = Thrust Loss Check</td>
<td><ul class="simple">
<li>0 = Thrust Restored</li>
<li>1 = Thrust Loss Detected (altitude may be prioritised over yaw control)</li>
</ul>
</td>
</tr>

<tr>
<td>26 = Sensor Failsafe (Sub)</td>
<td><ul class="simple">
<li>0 = Sensor Failsafe Cleared</li>
<li>1 = Sensor Failsafe Triggered</li>
</ul>
</td>
</tr>

<tr>
<td>27 = Leak Failsafe (Sub)</td>
<td><ul class="simple">
<li>0 = Leak Failsafe Cleared</li>
<li>1 = Leak Detector Failsafe Triggered</li>
</ul>
</td>
</tr>

<tr>
<td>28 = Pilot Input Timeout Failsafe (Sub only)</td>
<td><ul class="simple">
<li>0 = Pilot Input Failsafe Cleared</li>
<li>1 = Pilot Input Failsafe Triggered</li>
</ul>
</td>
</tr>

<tr>
<td>29 = Vibration Failsafe</td>
<td><ul class="simple">
<li>0 = Excessive Vibration Compensation De-activated</li>
<li>1 = Excessive Vibration Compenstaion Activated</li>
</ul>
</td>
</tr>

</tbody>
</table></div>
</div>


            
            
             
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="common-downloading-and-analyzing-data-logs-in-mission-planner.html" class="btn btn-neutral float-right" title="Downloading and Analyzing Data Logs in Mission Planner" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="common-logs.html" class="btn btn-neutral" title="Logs" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>
  
  
  Questions, issues, and suggestions about this page can be raised on the <a href="https://discuss.ardupilot.org">forums</a>. Issues and suggestions may be posted on the forums or the <a href="https://github.com/ArduPilot/ardupilot_wiki/issues/new?title=Diagnosing problems using Logs&amp;body=[Diagnosing problems using Logs](https://ardupilot.org/copter/docs/common-diagnosing-problems-using-logs.html)%20-%20Describe%20the%20issue/suggestion%20and%20improve%20the%20title.%20Please%20keep%20a%20link%20to%20the%20original%20article%20if%20relevant.&amp;labels=docs">Github Issue Tracker</a>.
  <hr/>

  <div role="contentinfo">
    <p>
    <a style="float:right;" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
        &copy; Copyright 2020, ArduPilot Dev Team.

    </p>
  </div>
  


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>
      <script type="text/javascript" src="../_static/./useralerts.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
    <script type="text/javascript" src="../_static/js/menubar.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   


<!-- Google Analytics -->
<!-- This is official ArduPilot analytics account -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  _gaq.push(['_trackPageLoadTime']);
  _gaq.push(["_setSiteSpeedSampleRate", 0]);
  ga('create', 'UA-75650032-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- Google Analytics -->

</body>
</html>