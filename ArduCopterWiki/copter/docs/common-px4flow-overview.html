

<!-- Path to wiki directories, without backslash -->

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PX4FLOW Optical Flow Camera Board &mdash; Copter  documentation</title>
  

  <!-- favicon -->
  
  
    <link rel="shortcut icon" href="../_static/favicon_copter.ico"/>
  
  <!-- favicon end -->
  
  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/common_theme_override.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Copter  documentation" href="../index.html"/>
        <link rel="up" title="Optical Flow Sensors (landingpage)" href="common-optical-flow-sensors-landingpage.html"/>
        <link rel="next" title="OpenMV for Optical Flow" href="common-openmv-optflow.html"/>
        <link rel="prev" title="Hex HereFlow Optical Flow Sensor" href="common-hereflow.html"/>  
  <script type="text/javascript">
  window.liveSettings = {
    api_key: "53747d3f35bf4cec9372629094cd9fe2",
    picker: "bottom-right",
    detectlang: true,
    autocollect: true,
    dynamic: false
  };
  </script>


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>



<body class="wy-body-for-nav" role="document">

        
    <div id='cssmenu'>
        <ul>
           <li><a href='/ardupilot/index.html'>Home</a>
              <ul>
                 <li><a href='/copter/index.html'>Copter</a></li>
                 <li><a href='/plane/index.html'>Plane</a></li>
                 <li><a href='/rover/index.html'>Rover</a></li>
                 <li><a href='http://ardusub.com/'>Sub</a></li>
                 <li><a href='/antennatracker/index.html'>AntennaTracker</a></li>
                 <li><a href='/planner/index.html'>Mission Planner</a></li>
                 <li><a href='/planner2/index.html'>APM Planner 2</a></li>
                 <li><a href='/mavproxy/index.html'>MAVProxy</a></li>
                 <li><a href='/dev/docs/companion-computers.html'>Companion Computers</a></li>
                 <li><a href='/dev/index.html'>Developer</a></li>
              </ul>
           </li>
           
          
           
           <li><a href='https://firmware.ardupilot.org/'>Downloads</a>
              <ul>
                <li><a href='https://firmware.ardupilot.org/Tools/MissionPlanner/'>Mission Planner</a></li>
                <li><a href='https://firmware.ardupilot.org/Tools/APMPlanner/'>APM Planner 2</a></li>
                   <li><a title="Advanced User Tools" href="common-downloads_advanced_user_tools.html">Advanced User Tools</a></li>
                   <li><a title="Developer Tools" href="common-downloads_developer_tools.html">Developer Tools</a></li>
                   <li><a title="Firmware" href="common-downloads_firmware.html">Firmware</a></li>
                </ul>
           </li>
           
           <li><a href='https://discuss.ardupilot.org' />Community</a>
              <ul>
                 <li><a href='https://discuss.ardupilot.org/'>Support Forums</a></li>
                 <li><a href='https://www.facebook.com/groups/ArduPilot.org'>Facebook</a></li>
                 <li><a href='https://ardupilot.org/discord'>Developer Chat (Discord)</a></li>
                 <li><a href='https://ardupilot.org/discord'>Developer Voice (Discord)</a></li>
				 <li><a href='https://ardupilot.org/dev/docs/common-contact-us.html'>Contact us</a></li>
				 <li><a href='https://ardupilot.org/dev/index.html#getting-involved'>Getting involved</a></li>
                   <li><a title="Commercial Support" href="common-commercial-support.html">Commercial Support</a></li>
                   <li><a title="Dev Team" href="common-team.html">Development Team</a></li>
                   <li><a title="Training Centers" href="common-training-centers.html">UAS Training Centers</a></li>
              </ul>
           </li>
             <li><a title="Stores" href="common-stores.html">Stores</a></li>


             <li><a title="SWAG Shop" href="https://shop.ardupilot.org">SWAG</a></li>

           
           
                        <li><a title="About" href="../index.html">About</a>
               <ul>
                   <li><a title="Project News" href="project-news.html">News</a></li>
                   <li><a title="History of ArduPilot" href="common-history-of-ardupilot.html">History</a></li>
                   <li><a href='https://ardupilot.org/dev/docs/license-gplv3.html'>License</a></li>
                   <li><a href='https://ardupilot.org/dev/docs/trademark.html'>Trademark</a></li>
                   <li><a title="Acknowledgments" href="common-acknowledgments.html">Acknowledgments</a></li>
                   <li><a title="Wiki Editing Guide" href="common-wiki_editing_guide.html">Wiki Editing Guide</a></li>
               </ul>
             </li>
        </ul>
        
<style>
#jdlogo {
  top: 10px;
  right: 20px;
  position: absolute;
  color: #dddddd;
}
#jdlogo a:visited,
#jdlogo a:link {
  color: #9B59B6;
}
#jdlogo a:hover,
#jdlogo a:active {
  color: #CACACA;
}
</style>

</div>

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> Copter
        

        
          
          <img src="../_static/ardupilot_logo.png" class="logo" />
        
        </a>

        
          
          
        

        
          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        
        
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introducing Copter</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-autopilots.html">AutoPilot Hardware Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial-setup.html">First Time Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="flying-arducopter.html">First Flight</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-when-problems-arise.html">If A Problem Arises</a></li>
<li class="toctree-l1"><a class="reference internal" href="copter-flight-features.html">Flight Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="common-advanced-configuration.html">Advanced Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="common-rcoutput-mapping.html">Autopilot Output Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="autotune.html">AutoTune</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-auxiliary-functions.html">Auxiliary Function Switches</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel-7-and-8-options.html">Auxiliary Function Switches (3.6 and earlier)</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-baro-temp-comp.html">Baro Temperature Compensation</a></li>
<li class="toctree-l2"><a class="reference internal" href="boat-mode.html">Boat mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-bootloader-update.html">Bootloader Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-canbus-setup-advanced.html">CAN Bus Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-compass-setup-advanced.html">Compass Setup (Advanced)</a></li>
<li class="toctree-l2"><a class="reference internal" href="current-limiting-and-voltage-scaling.html">Current Limiting and Voltage Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-dshot.html">Brushless ESCs</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-apm-navigation-extended-kalman-filter-overview.html">Extended Kalman Filter (EKF)</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-geofencing-landing-page.html">Fence Failsafes</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-flight-time-recorder.html">Flight Time Recorder</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-FPort-receivers.html">FPort Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-gpios.html">GPIOs</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-gps-for-yaw.html">GPS for Yaw (aka Moving Baseline)</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-gcs-only-operation.html">Ground Control Station Only Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="ground-effect-compensation.html">Ground Effect Compensation</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-imu-fft.html">In-Flight FFT Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-watchdog.html">Independent Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-lua-scripts.html">LUA Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-magnetic-interference.html">Magnetic Interference</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-MAVLink2-signing.html">MAVLink2 Packet Signing (Security)</a></li>
<li class="toctree-l2"><a class="reference internal" href="motor-thrust-scaling.html">Motor Thrust Scaling</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="common-non-gps-navigation-landing-page.html">Non-GPS Navigation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="common-vio-tracking-camera.html">Intel RealSense T265</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-marvelmind.html">MarvelMind Beacons</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="common-optical-flow-sensors-landingpage.html">    Optical Flow</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="common-optical-flow-sensor-setup.html">Optical Flow Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="common-cheerson-cxof.html">Cheerson CX-OF</a></li>
<li class="toctree-l4"><a class="reference internal" href="common-hereflow.html">HereFlow</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">PX4FLOW</a></li>
<li class="toctree-l4"><a class="reference internal" href="common-openmv-optflow.html">OpenMV</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="common-optitrack.html">OptiTrack motion capture system</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-pozyx.html">Pozyx Beacons</a></li>
<li class="toctree-l3"><a class="reference external" href="https://ardupilot.org/dev/docs/ros-cartographer-slam.html">ROS with Google Cartographer (Developers only)</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-vicon-for-nongps-navigation.html">Vicon Positioning System</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-zed.html">Visual Odometry with OpenKai and ZED</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-non-gps-to-gps.html">GPS/Non-GPS Transitions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="common-ntf-devices.html">Notification Devices (LEDs,Buzzer,etc.)</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-imu-notch-filtering.html">Notch Filter Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-object-avoidance-landing-page.html">Object Avoidance</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-optical-flow-sensor-setup.html">Optical Flow Sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameters.html">Parameter List (Full)</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-parameter-reset.html">Parameter Reset</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-rcmap.html">RC Input Channel Mapping (RCMAP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-rc-options.html">RC Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-camera-runcam.html">RunCam Camera Configuration and Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-sensor-offset-compensation.html">Sensor Position Offset Compensation</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-sensor-testing.html">Sensor Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-serial-passthrough.html">Serial Port to Port Passthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-serial-options.html">Serial Port Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain-following-manual-modes.html">Surface Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-telemetry-port-setup.html">Telemetry Port Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="terrain-following.html">Terrain Following (Autonomous modes)</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-tuning.html">Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-uavcan-setup-advanced.html">UAVCAN Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="common-ublox-gps.html">UBlox GPS Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="common-mission-planning.html">Mission Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-logs.html">Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-optional-hardware.html">Peripheral Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="traditional-helicopters.html">Traditional Helicopters</a></li>
<li class="toctree-l1"><a class="reference internal" href="tricopter.html">Tricopter</a></li>
<li class="toctree-l1"><a class="reference internal" href="singlecopter-and-coaxcopter.html">SingleCopter and CoaxCopter</a></li>
<li class="toctree-l1"><a class="reference internal" href="heliquads.html">HeliQuads</a></li>
<li class="toctree-l1"><a class="reference internal" href="skyrocket.html">SkyRocket</a></li>
<li class="toctree-l1"><a class="reference internal" href="solo_arducopter_upgrade.html">Solo</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference-frames.html">Reference Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-use-cases-and-applications.html">Use-Cases and Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-antenna-tracking.html">Antenna Tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-simulation.html">Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-master-features.html">Upcoming Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-user-alerts.html">User Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-appendix.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-table-of-contents.html">Full Table of Contents</a></li>
</ul>

          
        
        
        <!-- add paypal and dronecode logos -->
                <div style="margin: auto; padding-left:20px; padding-right:20px; width=100%">

        <hr />
        <form style="margin:auto;" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
        <input type="hidden" name="cmd" value="_s-xclick" />
        <input type="hidden" name="hosted_button_id" value="BBF28AFAD58B2" />
        <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate" />
        </form>
        <br>
        <a href="common-donation.html">Individual</a>
        <a href="common-partners.html">Partners</a>
        <a href="https://shop.ardupilot.org">SWAG Shop</a>

        <hr />
        </div>
        <!-- endadd paypal and dronecode logos -->
              
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Copter</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



 
 
 
 
 
  
   
 

<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="copter-flight-features.html">Flight Features</a> &raquo;</li>
      
          <li><a href="common-non-gps-navigation-landing-page.html">Non-GPS Navigation</a> &raquo;</li>
      
          <li><a href="common-optical-flow-sensors-landingpage.html">Optical Flow Sensors (landingpage)</a> &raquo;</li>
      
    <li>PX4FLOW Optical Flow Camera Board</li>
      <li class="wy-breadcrumbs-aside">
                
          
            <a href="https://github.com/ArduPilot/ardupilot_wiki/blob/master/common/source/docs/common-px4flow-overview.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="px4flow-optical-flow-camera-board">
<span id="common-px4flow-overview"></span><h1>PX4FLOW Optical Flow Camera Board<a class="headerlink" href="#px4flow-optical-flow-camera-board" title="Permalink to this headline">¶</a></h1>
<p>This article describes how to setup the <a class="reference external" href="https://northox.myshopify.com/collections/frontpage/products/px4flow">PX4FLOW (Optical Flow) Sensor</a> which can be used in place of a GPS.</p>
<div style="padding-bottom: 56.250000%; padding-top: 30px; position: relative; width: 100%">
<iframe src="https://www.youtube.com/embed/LP8kl4hGfMw" style="border: 0; height: 100%; left: 0; position: absolute; top: 0; width: 100%">
</iframe></div><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The PX4FLOW is not yet supported in Plane or Rover.</p>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://store.cuav.net/index.php?id_product=52&amp;id_product_attribute=0&amp;rewrite=cuav-px4flow-21-optical-flow-sensor-smart-camera-for-px4-pixhawk-flight-control-without-sonar-or-with-sonar&amp;controller=product&amp;id_lang=3">PX4FLOW (Optical Flow) Sensor</a> is a
specialized high resolution downward pointing camera module and a 3-axis gyro that uses
the ground texture and visible features to determine aircraft ground velocity.
Although the sensor may be supplied with a built-in Maxbotix LZ-EZ4 sonar to measure
height, this has not been reliable enough over a range of surfaces in testing, so its
readings are not used. It is recommended to purchase a PX4Flow device without the sonar.
Instead a separate <a class="reference internal" href="common-rangefinder-landingpage.html#common-rangefinder-landingpage"><span class="std std-ref">Range Finder</span></a>
such as the <a class="reference internal" href="common-lightware-sf10-lidar.html#common-lightware-sf10-lidar"><span class="std std-ref">LightWare SF10b</span></a>
should also be attached to the vehicle.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">To best use this flow sensor you will need to purchase a separate range
finder like the <a class="reference internal" href="common-lightware-sf10-lidar.html#common-lightware-sf10-lidar"><span class="std std-ref">LightWare SF10b</span></a></p>
</div>
</div>
<div class="section" id="install-drivers-windows-only">
<h2>Install Drivers (Windows only)<a class="headerlink" href="#install-drivers-windows-only" title="Permalink to this headline">¶</a></h2>
<p>On a Windows machine a “PX4Flow” device should appear in Connection drop-down of the Mission Planner (and the Windows Device Manager), or be automatically recognized by QGroundControl.  If it does not you may need to download, unzip and manually install the <a class="reference external" href="https://download.ardupilot.org/downloads/wiki/advanced_user_tools/px4flow_win_driver.zip">px4flow windows driver</a> which may in turn require allowing installing unsigned drivers.</p>
</div>
<div class="section" id="using-missionplanner">
<h2>Using MissionPlanner<a class="headerlink" href="#using-missionplanner" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Download and unzip the <a class="reference external" href="https://download.ardupilot.org/downloads/wiki/advanced_user_tools/px4flow-klt-06Dec2014.zip">PX4Flow-KLT firmware</a>
(<a class="reference external" href="https://github.com/priseborough/px4flow/tree/klt_flow">source code here</a>)</p>
</li>
<li><p class="first">Connect the PX4Flow sensor to your computer using a micro USB cable.</p>
</li>
<li><p class="first">Open the Initial Setup, Install Firmware screen, select the COM port and click the “Load custom firmware” link.  Select the px4flow-klt-06dec2014.px4 binary you downloaded in Step 1.  You may need to unplug and plug back in the sensor to start the upload.</p>
<a class="reference external image-reference" href="../_images/PX4Flow_FirmUpgrade1_MP.png"><img alt="../_images/PX4Flow_FirmUpgrade1_MP.png" src="../_images/PX4Flow_FirmUpgrade1_MP.png" /></a>
</li>
<li><p class="first">Disconnect and reconnect the sensor/USB cable</p>
</li>
<li><p class="first">Select the appropriate COM port and press Connect</p>
</li>
<li><p class="first">Open the Initial Setup &gt; Optional Hardware &gt; PX4Flow screen</p>
</li>
<li><p class="first">Remove the lens cap and point the camera at a high contrast object at least 3m away.  Remove the small screw that stops the lens from turning and adjust the focus until the image appears clearly</p>
<a class="reference external image-reference" href="../_images/PX4Flow_Focus_MP.png"><img alt="../_images/PX4Flow_Focus_MP.png" src="../_images/PX4Flow_Focus_MP.png" /></a>
</li>
</ol>
</div>
<div class="section" id="using-qgroundcontrol">
<h2>Using QGroundControl<a class="headerlink" href="#using-qgroundcontrol" title="Permalink to this headline">¶</a></h2>
<p>In order to use QgroundControl, PX4Flow and ArduPilot, you will need to complete setup and focussing with the firmware loaded by QGroundControl, and then update the firmware to be compatible with ArduPilot.</p>
<ol class="arabic simple">
<li>Select the Vehicle Setup page, and click the Firmware tab.</li>
<li>Connect the PX4Flow sensor to your computer using a micro USB cable.</li>
<li>Check the “Standard Version (stable)” is selected in the right hand pane. Click “OK”. QGroundControl will flash a firmware that can be used to focus the lens.</li>
<li>Unplug and replug the sensor. Two extra tabs should appear: “PX4Flow” and “Parameters”.</li>
<li>Click “PX4Flow”, remove the lens cap and point the camera at a high contrast object at least 3m away.  Remove the small screw that stops the lens from turning and adjust the focus until the image appears clearly.  This will focus the device to infinity.  Refit the screw.</li>
<li>Download and unzip the <a class="reference external" href="https://download.ardupilot.org/downloads/wiki/advanced_user_tools/px4flow-klt-06Dec2014.zip">PX4Flow-KLT firmware</a>
(<a class="reference external" href="https://github.com/priseborough/px4flow/tree/klt_flow">source code here</a>)</li>
<li>Unplug the sensor, click on the “Firmware” tab and replug the sensor.</li>
<li>On the right hand side, click on the firmware version dropdown, and select “Custom firmware file”.  Click “OK”.  Then select the firmware downloaded above.  QGroundControl should now flash a firmware compatible with ArduPilot.  QGroundControl will now think that the sensor is a Pixhawk.  Dont worry.  Unplug it, and connect it to your autopilot.</li>
</ol>
</div>
<div class="section" id="connect-to-the-pixhawk">
<h2>Connect to the Pixhawk<a class="headerlink" href="#connect-to-the-pixhawk" title="Permalink to this headline">¶</a></h2>
<a class="reference external image-reference" href="../_images/OptFlow_Pixhawk.jpg"><img alt="../_images/OptFlow_Pixhawk.jpg" src="../_images/OptFlow_Pixhawk.jpg" /></a>
<p>The sensor should be connected to the autopilot via the 4-pin I2C port.  In
most cases an I2C splitter should be used to allow other I2C devices (like the external RGB LED and
GPS/Compass module’s compass) to share the same port.</p>
</div>
<div class="section" id="mounting-to-the-frame">
<h2>Mounting to the Frame<a class="headerlink" href="#mounting-to-the-frame" title="Permalink to this headline">¶</a></h2>
<p>The default mounting of the flow sensor is for it to be pointing straight down with the micro USB port pointing towards the front of the vehicle.
On the back of the sensor you should see the axis printed, the X axis should point forwards and the Y axis to the right.
The <a class="reference external" href="https://ardupilot.org/copter/docs/parameters.html#flow-orient-yaw" title="(in Copter)"><span class="xref std std-ref">FLOW_ORIENT_YAW</span></a> parameter can be used to account for other yaw orientations.</p>
<p>It is important that the flow sensor be mounted where it does not experience
angular angular vibration that could blur the image.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default mounting orientation is different to that shown on
the <a class="reference external" href="http://pixhawk.org/modules/px4flow">ETH PX4FLOW wiki</a>. If you
mount the board as shown in the <a class="reference external" href="http://pixhawk.org/modules/px4flow">ETH PX4FLOW wiki</a>, you will need to set
<a class="reference external" href="https://ardupilot.org/copter/docs/parameters.html#flow-orient-yaw" title="(in Copter)"><span class="xref std std-ref">FLOW_ORIENT_YAW</span></a> to -9000.</p>
</div>
</div>
<div class="section" id="enabling-the-sensor">
<h2>Enabling the sensor<a class="headerlink" href="#enabling-the-sensor" title="Permalink to this headline">¶</a></h2>
<a class="reference external image-reference" href="../_images/OptFlow_MPSetup.png"><img alt="../_images/OptFlow_MPSetup.png" src="../_images/OptFlow_MPSetup.png" /></a>
<p>The sensor can be enabled by connecting to the autopilot with the Mission Planner and
then on the <strong>Initial Setup | Optional Hardware | Optical Flow</strong> page
check the <strong>Enable</strong> checkbox.  Alternatively the <a class="reference external" href="https://ardupilot.org/copter/docs/parameters.html#flow-type" title="(in Copter)"><span class="xref std std-ref">FLOW_TYPE</span></a>
parameter should be set to “1” through the full parameters list.  The
sensor will be initialised once the Pixhawk board is rebooted.</p>
</div>
<div class="section" id="testing-and-setup">
<h2>Testing and Setup<a class="headerlink" href="#testing-and-setup" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="common-optical-flow-sensor-setup.html#common-optical-flow-sensor-setup"><span class="std std-ref">Optical Flow Sensor Testing and Setup</span></a></p>
</div>
</div>


            
            
             
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="common-openmv-optflow.html" class="btn btn-neutral float-right" title="OpenMV for Optical Flow" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="common-hereflow.html" class="btn btn-neutral" title="Hex HereFlow Optical Flow Sensor" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>
  
  
  Questions, issues, and suggestions about this page can be raised on the <a href="https://discuss.ardupilot.org">forums</a>. Issues and suggestions may be posted on the forums or the <a href="https://github.com/ArduPilot/ardupilot_wiki/issues/new?title=PX4FLOW Optical Flow Camera Board&amp;body=[PX4FLOW Optical Flow Camera Board](https://ardupilot.org/copter/docs/common-px4flow-overview.html)%20-%20Describe%20the%20issue/suggestion%20and%20improve%20the%20title.%20Please%20keep%20a%20link%20to%20the%20original%20article%20if%20relevant.&amp;labels=docs">Github Issue Tracker</a>.
  <hr/>

  <div role="contentinfo">
    <p>
    <a style="float:right;" rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
        &copy; Copyright 2020, ArduPilot Dev Team.

    </p>
  </div>
  


</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>
      <script type="text/javascript" src="../_static/./useralerts.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
    <script type="text/javascript" src="../_static/js/menubar.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   


<!-- Google Analytics -->
<!-- This is official ArduPilot analytics account -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  _gaq.push(['_trackPageLoadTime']);
  _gaq.push(["_setSiteSpeedSampleRate", 0]);
  ga('create', 'UA-75650032-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- Google Analytics -->

</body>
</html>